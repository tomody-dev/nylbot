name: on-comment

# =============================================================================
# on-comment - Project-Specific nylbot Commands Caller
# =============================================================================
# This is the project-specific caller workflow that invokes nylbot-related
# actions with project-specific configuration.
#
# Currently supported commands:
# - /nylbot merge - See merge/action.yml for details
#
# CUSTOMIZATION:
# - Modify the `with` inputs below to match your project's branching strategy
# - The actions handle all the logic, so you only need to
#   configure the branch naming conventions here
# =============================================================================

on:
  issue_comment:
    types: [created]

# Concurrency per PR number to avoid parallel execution
concurrency:
  group: on-comment-${{ github.event.issue.number }}
  cancel-in-progress: false

jobs:
  nylbot-merge:
    name: nylbot-merge
    # Only run if this is a PR comment (not an issue)
    if: github.event.issue.pull_request
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
      issues: write
    steps:
      - name: Run nylbot-merge action
        uses: tomody-dev/nylbot/merge@v1
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
